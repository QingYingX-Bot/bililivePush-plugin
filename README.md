## bililivePush-plugin

B站直播间开播/下播推送插件，支持订阅UP主或直播间，自动推送开播和下播消息。

### 安装
```bash
cd plugins
git clone https://github.com/QingYingX-Bot/bililivePush-plugin
cd ..
pnpm install
```

### 使用

#### 基本命令
|指令|功能|
|-------|-------|
|`#推送帮助`|查看帮助菜单（精美HTML格式）|
|`#订阅UP[uid]`|订阅指定UP主（推荐使用）|
|`#订阅直播间[room_id]`|订阅指定直播间|
|`#取消订阅UP[uid]`|取消订阅指定UP主|
|`#取消订阅直播间[room_id]`|取消订阅指定直播间|
|`#我的订阅列表`|查看我的订阅列表|
|`#本群订阅列表`|查看本群的订阅列表|
|`#测试推送[开播\|下播]`|测试推送功能|
|`#推送插件更新`|更新插件|

#### 命令修饰符
- **全体**：在命令前加"全体"二字，推送时会@全体成员
  - 例如：`#全体订阅UP123456`
- **匿名**：在命令前加"匿名"二字，推送时不会@自己
  - 例如：`#匿名订阅UP123456`
- **自定义前缀**：通过配置项`trigger`自定义命令前缀（默认为`#`）
  - 例如：设置`trigger: "xx"`，则命令为`#xx订阅UP123456`

#### 测试推送
测试推送功能支持多种格式：
- `#测试推送开播` - 测试开播推送（使用订阅列表第一个）
- `#测试推送下播` - 测试下播推送（使用订阅列表第一个）
- `#测试推送开播 直播间123456` - 测试指定房间的开播推送
- `#测试推送下播 uid:123456` - 测试指定UP的下播推送
- `#测试推送开播 room:123456` - 使用room格式
- `#测试推送下播 up:123456` - 使用up格式

### 配置说明

配置文件位置：`plugins/bililivePush-plugin/data/cfg.json`

|配置项|类型|默认值|说明|
|-------|-------|-------|-------|
|`trigger`|string|`""`|命令前缀自定义，空值表示使用`#`|
|`user.htmlTemplate`|boolean|`true`|是否使用HTML模板推送（精美卡片样式）|
|`user.endPush`|boolean|`true`|是否推送下播消息|
|`user.forward`|boolean|`false`|是否使用合并转发|
|`user.sleep`|number|`0`|推送间隔时间（秒），避免频繁推送|
|`rePush`|boolean|`false`|是否允许重复推送（相同标题和分区）|

### 使用示例

```bash
# 订阅UP主（推荐）
#订阅UP1919810
#全体订阅UP123456
#匿名订阅UP66666

# 订阅直播间
#订阅直播间114514

# 取消订阅
#取消订阅UP1919810
#全体取消订阅12345

# 查看订阅
#我的订阅列表
#本群订阅列表

# 测试推送
#测试推送开播
#测试推送下播
#测试推送开播 直播间123456
#测试推送下播 uid:123456
```

### 功能特性

- ✅ 支持订阅UP主或直播间
- ✅ 自动检测开播/下播状态
- ✅ 精美的HTML模板推送（可配置）
- ✅ 支持@全体或匿名推送
- ✅ 支持合并转发
- ✅ 可配置推送间隔
- ✅ 支持重复推送检测
- ✅ 测试推送功能，方便调试

### 其他
有问题提issue  
提交发pull request  
最后希望能给项目点个star~

#### 项目链接
听说Stars越多，更新越快哦~  
github：[QingYingX](https://github.com/QingYingX)  
gitee：[QingYingX](https://gitee.com/QingYingX)